<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>RHEL OS failed to boot, got stuck (crowdstrike service) and the OS shut down immediately | Alwan&#39;s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="Issue The RHEL OS running on top of openstack failed to boot, got stuck (crowdstrike service) and the OS shut down immediately. The logs for this event could not be collected even with rescue mode.
Troubleshooting Steps Boot into rescue mode using rd.break, then check the disk space utilization. df -TH Observe disk usage with a percentage usage of up to 100%.
In this case I found that /var/log/audit was full.">
<meta name="author" content="">
<link rel="canonical" href="https://Mohammad-Alwan.github.io/website/post/os-failed/">
<link crossorigin="anonymous" href="/website/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css" integrity="sha256-1vzSCk&#43;4bvpN&#43;sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://Mohammad-Alwan.github.io/website/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://Mohammad-Alwan.github.io/static/assets/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://Mohammad-Alwan.github.io/static/assets/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://Mohammad-Alwan.github.io/static/assets/apple-touch-icon.png">
<link rel="mask-icon" href="https://Mohammad-Alwan.github.io/website/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://Mohammad-Alwan.github.io/website/post/os-failed/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
  

<meta property="og:url" content="https://Mohammad-Alwan.github.io/website/post/os-failed/">
  <meta property="og:site_name" content="Alwan&#39;s Blog">
  <meta property="og:title" content="RHEL OS failed to boot, got stuck (crowdstrike service) and the OS shut down immediately">
  <meta property="og:description" content="Issue The RHEL OS running on top of openstack failed to boot, got stuck (crowdstrike service) and the OS shut down immediately. The logs for this event could not be collected even with rescue mode.
Troubleshooting Steps Boot into rescue mode using rd.break, then check the disk space utilization. df -TH Observe disk usage with a percentage usage of up to 100%.
In this case I found that /var/log/audit was full.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2024-12-13T22:35:01+07:00">
    <meta property="article:modified_time" content="2024-12-13T22:35:01+07:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RHEL OS failed to boot, got stuck (crowdstrike service) and the OS shut down immediately">
<meta name="twitter:description" content="Issue The RHEL OS running on top of openstack failed to boot, got stuck (crowdstrike service) and the OS shut down immediately. The logs for this event could not be collected even with rescue mode.
Troubleshooting Steps Boot into rescue mode using rd.break, then check the disk space utilization. df -TH Observe disk usage with a percentage usage of up to 100%.
In this case I found that /var/log/audit was full.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://Mohammad-Alwan.github.io/website/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "RHEL OS failed to boot, got stuck (crowdstrike service) and the OS shut down immediately",
      "item": "https://Mohammad-Alwan.github.io/website/post/os-failed/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "RHEL OS failed to boot, got stuck (crowdstrike service) and the OS shut down immediately",
  "name": "RHEL OS failed to boot, got stuck (crowdstrike service) and the OS shut down immediately",
  "description": "Issue The RHEL OS running on top of openstack failed to boot, got stuck (crowdstrike service) and the OS shut down immediately. The logs for this event could not be collected even with rescue mode.\nTroubleshooting Steps Boot into rescue mode using rd.break, then check the disk space utilization. df -TH Observe disk usage with a percentage usage of up to 100%.\nIn this case I found that /var/log/audit was full.",
  "keywords": [
    
  ],
  "articleBody": "Issue The RHEL OS running on top of openstack failed to boot, got stuck (crowdstrike service) and the OS shut down immediately. The logs for this event could not be collected even with rescue mode.\nTroubleshooting Steps Boot into rescue mode using rd.break, then check the disk space utilization. df -TH Observe disk usage with a percentage usage of up to 100%.\nIn this case I found that /var/log/audit was full.\nFree up space for the /var/log/audit/ partition and reboot the node sudo rm -f /var/log/audit/audit.log.* Change Audit Rules Configuration to prevent the system halt when the /var/log/audit/ full vi /etc/audit/auditd.conf disk_full_action = ignore Root Cause This issue caused by audit rule policy trigger the operating system going halt when /var/log/audit/ full. /var/log/audit full caused by there is massive increasing log on /var/log/audit which make the 2 partition was full. After free up the space for /var/log/audit problem solved. And to prevent the same issue appear in the future we change the audit rule policy.\n",
  "wordCount" : "165",
  "inLanguage": "en",
  "datePublished": "2024-12-13T22:35:01+07:00",
  "dateModified": "2024-12-13T22:35:01+07:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://Mohammad-Alwan.github.io/website/post/os-failed/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Alwan's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://Mohammad-Alwan.github.io/website/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://Mohammad-Alwan.github.io/website/" accesskey="h" title="Alwan&#39;s Blog (Alt + H)">Alwan&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://Mohammad-Alwan.github.io/website/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://Mohammad-Alwan.github.io/website/posts/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      RHEL OS failed to boot, got stuck (crowdstrike service) and the OS shut down immediately
    </h1>
    <div class="post-meta"><span title='2024-12-13 22:35:01 +0700 +0700'>December 13, 2024</span>

</div>
  </header> 
  <div class="post-content"><h3 id="issue">Issue<a hidden class="anchor" aria-hidden="true" href="#issue">#</a></h3>
<p>The RHEL OS running on top of openstack failed to boot, got stuck (crowdstrike service) and the OS shut down immediately. The logs for this event could not be collected even with rescue mode.</p>
<h3 id="troubleshooting-steps">Troubleshooting Steps<a hidden class="anchor" aria-hidden="true" href="#troubleshooting-steps">#</a></h3>
<ol>
<li>Boot into rescue mode using rd.break, then check the disk space utilization.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>df -TH 
</span></span></code></pre></div><p>Observe disk usage with a percentage usage of up to 100%.</p>
<blockquote>
<p><strong>In this case I found that <em>/var/log/audit</em> was full.</strong></p>
</blockquote>
<ol start="2">
<li>Free up space for the <em>/var/log/audit/</em> partition and reboot the node</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo rm -f /var/log/audit/audit.log.*
</span></span></code></pre></div><ol start="3">
<li>Change Audit Rules Configuration to prevent the system halt when the <em>/var/log/audit/</em> full</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vi /etc/audit/auditd.conf
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>disk_full_action <span style="color:#f92672">=</span> ignore
</span></span></code></pre></div><h3 id="root-cause">Root Cause<a hidden class="anchor" aria-hidden="true" href="#root-cause">#</a></h3>
<p>This issue caused by audit rule policy trigger the operating system going halt when <em>/var/log/audit/</em> full. <em>/var/log/audit</em> full caused by there is massive increasing log on <em>/var/log/audit</em> which make the 2 partition was full. After free up the space for <em>/var/log/audit</em> problem solved. And to prevent the same issue appear in the future we change the audit rule policy.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://Mohammad-Alwan.github.io/website/">Alwan&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
